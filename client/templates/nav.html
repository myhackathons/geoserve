
<template name="nav">
    <nav>
        <span class="login">
            {{loginButtons align="right"}}
                {{#if currentUser}}
                    {{#if hasInstaCode}}
                        {{#if instaPostReady}}
                            <form class="span" style="font-size:.85em;">
                            <fieldset>
                                <input id="mFilterDefault" name="mFilter" type="radio" value="likes" /> Default

                                <input id="mFilterLikes" name="mFilter" type="radio" value="likes"/> Likes
                                <input id="mFilterLastChange" name="mFilter" type="radio" value="lastHit"/> Last Change
                                <input id="mFilterDate" name="mFilter" type="radio" value="postId"/> Date
                            </fieldset>
                            <!--
                            <fieldset>
                                <input id="mOrder" name="mOrder" type="radio" value="postOrderAsc"/> Ascending
                                <input id="mOrder" name="mOrder" type="radio" value="postOrderD"/> Descending
                            </fieldset>
                            <a class="btn user_self">instaFeed</a>
                            -->
                            

                            </form>
                        {{else}}
                            <b>requesting...</b>
                        {{/if}}
                    {{else}}
                        <button class="button primary instaLogin" >Loginto Instagram</button>
                    {{/if}}
                 {{/if}}

       </span>
            {{>loggedInMenu}}
    </nav>
</template>

<template name="loggedInMenu">
    <div id="main_menu">
    {{#if currentUser}}
        <div id="the_markers">
           {{#each instaMarkers}}
                {{>instaMarker}}
           {{/each}}
        </div>
    {{else}}
        {{#if loggingIn}}
            <b style="color:black;">working...</b>
        {{else}}
        <h3 style="padding-top:4em;margin-left:1.25em;">Instageo</h3>
            
        <div class="span" style="padding-top:2em;color:black">
            <em>An <a href="http://instagram.com/developer/">Instagram-API</a> and Google Maps-API powered visualization of instagram posts with location data!</em>
            <ul style="padding-top:.5em;"><li>Log in / create an account</li><li>Press log into instagram</li><li>Press 'instaFeed' at any time to update your feed.. Otherwise feed updates every few mintutes. You do not need to use your instagram login to create an account.</p></li></ul>
            
            <b><a href="http://redcapmedia.com">Ronaldo Barbachano 2013</a></b>
        </div>
        {{/if}}
    {{/if}}
    </div>
</template>

<template name="instaMarker">
    <div id="{{_id}}" class="span focus_marker instaMarker">
    <img src="{{image_thumb}}"/>
    </div>
</template>